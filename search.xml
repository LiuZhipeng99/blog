<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello_Hexo</title>
    <url>/blog/2020/05/05/Hello-Hexo/</url>
    <content><![CDATA[<p>æœ¬ç¯‡ä¸»è¦ä»‹ç»å¦‚ä½•ç”¨Hexoæ­å»ºGithub Pagesï¼Œå¹¶ä¸”å¯¹æ¯”äº†åŒç±»é™æ€åšå®¢æ¡†æ¶ï¼Œè®°å½•äº†éƒ¨ç½²æ–¹é¢çš„æ˜“é”™è®¤çŸ¥ï¼Œæå‡ºäº†ä¸€äº›å¸¸ç”¨æ’ä»¶åŠç¾åŒ–åšå®¢çš„æ€è·¯ã€‚PSï¼šæœ¬æ–‡éå°ç™½æ•™ç¨‹ç±»</p>
<a id="more"></a>

<h2 id="Hexo-GitHub-Pages"><a href="#Hexo-GitHub-Pages" class="headerlink" title="Hexo+GitHub Pages"></a>Hexo+GitHub Pages</h2><p>ç¬¬ä¸€æ¬¡ä½¿ç”¨GitHubpageså‘å¸ƒåšå®¢ï¼Œä¹‹å‰æ˜¯wordpressçš„åŠ¨æ€åšå®¢ï¼Œä½†ç”±äºåšå®¢æ€§è´¨é€‚åˆé™æ€ç½‘é¡µï¼Œäºæ˜¯è·³åˆ°ä¸¤å¹´å‰åŸ‹ä¸‹ä¼ç¬”å¤„Githubpagesã€‚æ—¢ä¸ç”¨ç»­åŸŸååšå¤‡æ¡ˆï¼Œä¹Ÿä¸ç”¨ç§Ÿç”¨æœåŠ¡å™¨ï¼ˆè™½ç„¶ç‰›å®¢ç½‘é‚£ç™½å«–äº†ä¸€å¹´åä¸ºäº‘çš„ï¼‰ã€‚</p>
<h4 id="jekyll-or-hexo"><a href="#jekyll-or-hexo" class="headerlink" title="jekyll or hexo"></a>jekyll or hexo</h4><p>â€‹    ç›®å‰ä¸¤å¤§é™æ€åšå®¢æ¡†æ¶ï¼š<a href="jekyllcn.com">Jekyll</a>å’Œ<a href="heox.io">hexo</a>ã€‚</p>
<ul>
<li>å‰è€…æœ¬èº«æ˜¯è¢«GitHubé‡‡ç”¨æ¸²æŸ“çš„ï¼Œè€Œåè€…æ˜¯å…ˆç”Ÿæˆé™æ€æ–‡ä»¶å†ä¸Šä¼ ï¼Œç”±æ­¤åˆ†ç¦»å¼€æ¥ã€‚</li>
<li>å¦ä¸€ä¸ªå¤§åŒºåˆ«æ˜¯ä¾èµ–ï¼Œå‰è€…éœ€è¦æœ¬åœ°å®‰è£…rubyç­‰è€Œåè€…éœ€è¦nodejsï¼Œä»–ä»¬çš„ç¯å¢ƒé…ç½®éƒ½æœ‰ç›¸åº”æ–‡æ¡£ï¼Œå¦å¤–hexoä¸­æ–‡æ–‡æ¡£å¯¹æˆ‘è¿™ç§ä½æ°´å¹³è‹±è¯­å¾ˆè´´å¿ƒ</li>
</ul>
<h4 id="éƒ¨ç½²"><a href="#éƒ¨ç½²" class="headerlink" title="éƒ¨ç½²"></a>éƒ¨ç½²</h4><ul>
<li>ç»è¿‡æ¢ç´¢å‚è€ƒåšå®¢ï¼Œçº æ­£äº†è‡ªå·±å‡ ä¸ªé”™è¯¯è®¤çŸ¥ï¼š<ol>
<li>hexoåˆå§‹åŒ–åæ–‡ä»¶å¤¹ä½ç½®è‡ªç”±ï¼Œæ‰€ä»¥å¦‚æœæŠŠä»–æ”¾åˆ°ä¸€ä¸ªrepoå°±èƒ½é€šè¿‡cloneæ¥å¤šç«¯å†™æ–‡ï¼ˆæˆ‘æ˜¯æ”¾åœ¨user-pageçš„repoï¼‰ï¼Œè¿™æ ·æ—¢èƒ½ç®¡ç†blogä¹Ÿèƒ½åšå…¶ä»–é™æ€webé¡¹ç›®ï¼ˆå¦‚HXï¼‰ã€‚</li>
<li>æˆ‘ä¹‹å‰æœ‰ä¸ªé”™è¯¯è®¤çŸ¥æ˜¯åªèƒ½è®¿é—®user-pageï¼ˆä¹Ÿå°±æ˜¯username.github.ioï¼‰ï¼Œå…¶å®æ¯ä¸ªrepoéƒ½èƒ½è®¾ç½®pageï¼ˆå¦‚username.github.io/blogï¼Œå®ƒæ˜¯blogåº“çš„ä¸€ä¸ªåˆ†æ”¯ï¼‰ï¼Œå®ƒéœ€è¦çš„æ˜¯ä¸€ä¸ªåˆ†æ”¯ã€‚è€Œuserpageåªèƒ½æ˜¯masteråˆ†æ”¯ã€‚ã€‚</li>
<li>éœ€è¦deployæ—¶éœ€npmä¸‹è½½gitçš„åŒ…ï¼Œç«™ç‚¹é…ç½®æ–‡ä»¶çš„deployé¡¹æ”¹ä¸ºå¯¹åº”çš„repoå’Œå¯¹åº”åˆ†æ”¯ï¼ˆå›½å†…giteeåŒæ ·ï¼‰ã€‚</li>
</ol>
</li>
<li>æœ¬ç«™ä½¿ç”¨çš„Nextä¸»é¢˜ã€‚å…ˆæ®hexoæ–‡æ¡£é…ç½®å¥½hexoç¯å¢ƒï¼Œå†ä¸‹è½½ä¸»é¢˜åˆ°é…ç½®æ–‡ä»¶themeä¸­ï¼Œé€šè¿‡git clone <em>repo_url</em>  theme/next ä¸€æ­¥å®Œæˆä¹Ÿå¯ä¸‹è½½å‹ç¼©åŒ…è§£å‹åˆ°themeç›®å½•ä¸‹ã€‚ä¿®æ”¹ç«™ç‚¹é…ç½®æ–‡ä»¶çš„themeå­—æ®µå³å¯ã€‚éœ€è¦æŸ¥çœ‹nextçš„æ–‡æ¡£æ¥é…ç½®ï¼Œç»§è€Œæœ‰ä¸‹é¢çš„ç‰¹æ•ˆç¾åŒ– </li>
</ul>
<h2 id="åšå®¢ç¾åŒ–ï¼ˆå¾…ç»­ï¼‰"><a href="#åšå®¢ç¾åŒ–ï¼ˆå¾…ç»­ï¼‰" class="headerlink" title="åšå®¢ç¾åŒ–ï¼ˆå¾…ç»­ï¼‰"></a>åšå®¢ç¾åŒ–ï¼ˆå¾…ç»­ï¼‰</h2><blockquote>
<p>ä¸‹é¢åœ¨nexté…ç½®æ–‡ä»¶æœ‰æ¥å£ä¸ç”¨å¤šå†™ä»£ç ï¼Œçœ‹å…¶æ–‡æ¡£ä½¿ç”¨æ–¹æ³•å†è¿›ä¸»é¢˜é…ç½®æ–‡ä»¶ä¿®æ”¹ï¼Œä¸‹é¢ä¸»è¦é’ˆå¯¹å…¶ä»–ç±»</p>
</blockquote>
<h4 id="è¯„è®ºç³»ç»Ÿ"><a href="#è¯„è®ºç³»ç»Ÿ" class="headerlink" title="è¯„è®ºç³»ç»Ÿ"></a>è¯„è®ºç³»ç»Ÿ</h4><ul>
<li>æ­¤å¤–æœ‰éŸ©å›½<a href="livere.com">æ¥å¿…åŠ›</a>ã€‚åœ¨nextä¸»é¢˜ä¸­ä½¿ç”¨å‚è§<a href="http://theme-next.iissnan.com/third-party-services.html" target="_blank" rel="noopener">æ–‡æ¡£</a>ç¬¬ä¸‰æ–¹æœåŠ¡æ¥é…ç½®ã€‚</li>
<li>åŸºäºgithub-issueçš„<a href="https://imsun.net/posts/gitment-introduction/" target="_blank" rel="noopener">gitment</a></li>
<li>å¦æ‰¾åˆ°ä¸ªvalineæœ‰ä½¿ç”¨<a href="https://valine.js.org" target="_blank" rel="noopener">æ–‡æ¡£</a> æ³¨å†Œç”¨çš„leancloudå¯ä»¥å†åˆ›å»ºä¸ªappç»™ä¸‹é¢é˜…è¯»é‡ç”¨<ul>
<li>åœ¨2020.4.22çš„æ›´æ–°ä¸­ï¼šä¿®å¤ä½¿ç”¨äº†ä½ç‰ˆæœ¬çš„<code>av-min.js</code>é€ æˆçš„åˆå§‹åŒ–é”™è¯¯ï¼Œè¿™ä¹Ÿæ˜¯å½“å‰nextä¸»é¢˜è¿˜æœªä¿®æ”¹çš„ã€‚åªéœ€è¦å°†_src=â€//cdn1.lncld.net/static/js/3.0.4/av-min.jså¼•å…¥çš„è¿™ä¸ªleancloudæ“ä½œåº“æ³¨é‡Šï¼Œå¦åˆ™ä¼šå‡ºç°AVå¯¹è±¡æ²¡æœ‰åˆå§‹åŒ–çš„æŠ¥é”™</li>
</ul>
</li>
<li>PSï¼šæ‘˜è¦ä½¿ç”¨<!--more-->åˆ†å‰²ï¼›é˜…è¯»å…¨æ–‡ä¿®æ”¹ä¸»é¢˜é…ç½®auto_excerptå­—æ®µ</li>
</ul>
<h4 id="æ¶ææ ‡é¢˜"><a href="#æ¶ææ ‡é¢˜" class="headerlink" title="æ¶ææ ‡é¢˜"></a>æ¶ææ ‡é¢˜</h4><ul>
<li><p>ç‚¹å‡»<a href="diygod.me">æ•ˆæœ</a></p>
</li>
<li><p>åœ¨ä¸»é¢˜æ–‡ä»¶ä¸‹æ‰¾åˆ°headæ–‡ä»¶é‡ŒåŠ å…¥</p>
<figure class="highlight javascript"><table><tr><td class="code"><pre><span class="line"><span class="keyword">var</span> OriginTitle = <span class="built_in">document</span>.title;</span><br><span class="line"><span class="keyword">var</span> titleTime;</span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">'visibilitychange'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">document</span>.hidden) &#123;</span><br><span class="line">        $(<span class="string">'[rel="icon"]'</span>).attr(<span class="string">'href'</span>, <span class="string">"/img/trhx2.png"</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">'ãƒ½(â—-`Ğ”Â´-)ãƒäººå‘¢ï¼'</span>;</span><br><span class="line">        clearTimeout(titleTime);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        $(<span class="string">'[rel="icon"]'</span>).attr(<span class="string">'href'</span>, <span class="string">"/img/trhx2.png"</span>);</span><br><span class="line">        <span class="built_in">document</span>.title = <span class="string">'ãƒ¾(Åâˆ€Å3)ãƒå›æ¥äº†ï¼'</span> + OriginTitle;</span><br><span class="line">        titleTime = setTimeout(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="built_in">document</span>.title = OriginTitle;</span><br><span class="line">        &#125;, <span class="number">2000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="çœ‹æ¿å¨˜"><a href="#çœ‹æ¿å¨˜" class="headerlink" title="çœ‹æ¿å¨˜"></a>çœ‹æ¿å¨˜</h4><ul>
<li><a href="https://www.cnblogs.com/ButterflyEffect/p/10839613.html" target="_blank" rel="noopener">live2d</a></li>
</ul>
<h4 id="ç‚¹å‡»æ»‘åŠ¨ç‰¹æ•ˆ"><a href="#ç‚¹å‡»æ»‘åŠ¨ç‰¹æ•ˆ" class="headerlink" title="ç‚¹å‡»æ»‘åŠ¨ç‰¹æ•ˆ"></a>ç‚¹å‡»æ»‘åŠ¨ç‰¹æ•ˆ</h4><ul>
<li><p>ç‚¹å‡»ğŸˆçˆ†ç‚¸:æ”¾åœ¨ä¸»é¢˜æ–‡ä»¶ä¸‹_layoutæ–‡ä»¶ä¸­</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!-- ç‚¹å‡»å‡ºç°å½©è‰²æ°”çƒçˆ†ç‚¸æ•ˆæœ --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">canvas</span> <span class="attr">class</span>=<span class="string">"fireworks"</span> <span class="attr">style</span>=<span class="string">"position: fixed;left: 0;top: 0;z-index: 1; pointer-events: none;"</span> &gt;</span><span class="tag">&lt;/<span class="name">canvas</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"//cdn.bootcss.com/animejs/2.2.0/anime.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span> </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/wallleap/cdn/js/clickBom.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<ul>
<li><p>å…‰æ ‡ ç‚¹å‡»çƒŸèŠ±æ•ˆæœ<a href="https://www.cnblogs.com/axqa/p/11537599.html" target="_blank" rel="noopener">è¿™é‡Œ</a></p>
</li>
<li><p>é¼ æ ‡æ»‘è¿‡ç‰¹æ•ˆ æ˜Ÿæ˜Ÿæ®‹å½±ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/wallleap/cdn/js/xuehua.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="ç½‘ç«™è¿è¡Œæ—¶"><a href="#ç½‘ç«™è¿è¡Œæ—¶" class="headerlink" title="ç½‘ç«™è¿è¡Œæ—¶"></a>ç½‘ç«™è¿è¡Œæ—¶</h4><ul>
<li><p>åœ¨ä¸»é¢˜footeråŠ å…¥ï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"timeDate"</span>&gt;</span>è½½å…¥å¤©æ•°...<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"times"</span>&gt;</span>è½½å…¥æ—¶åˆ†ç§’...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">  <span class="keyword">var</span> now = <span class="keyword">new</span> <span class="built_in">Date</span>(); </span></span><br><span class="line"><span class="actionscript">  <span class="function"><span class="keyword">function</span> <span class="title">createtime</span><span class="params">()</span> </span>&#123; </span></span><br><span class="line"><span class="javascript">    <span class="keyword">var</span> grt= <span class="keyword">new</span> <span class="built_in">Date</span>(<span class="string">"03/08/2020 16:44:00"</span>);<span class="comment">//æ­¤å¤„ä¿®æ”¹ä½ çš„å»ºç«™æ—¶é—´æˆ–è€…ç½‘ç«™ä¸Šçº¿æ—¶é—´ </span></span></span><br><span class="line">    now.setTime(now.getTime()+250); </span><br><span class="line"><span class="javascript">    days = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> / <span class="number">24</span>; dnum = <span class="built_in">Math</span>.floor(days); </span></span><br><span class="line"><span class="javascript">    hours = (now - grt ) / <span class="number">1000</span> / <span class="number">60</span> / <span class="number">60</span> - (<span class="number">24</span> * dnum); hnum = <span class="built_in">Math</span>.floor(hours); </span></span><br><span class="line"><span class="javascript">    <span class="keyword">if</span>(<span class="built_in">String</span>(hnum).length ==<span class="number">1</span> )&#123;hnum = <span class="string">"0"</span> + hnum;&#125; minutes = (now - grt ) / <span class="number">1000</span> /<span class="number">60</span> - (<span class="number">24</span> * <span class="number">60</span> * dnum) - (<span class="number">60</span> * hnum); </span></span><br><span class="line"><span class="javascript">    mnum = <span class="built_in">Math</span>.floor(minutes); <span class="keyword">if</span>(<span class="built_in">String</span>(mnum).length ==<span class="number">1</span> )&#123;mnum = <span class="string">"0"</span> + mnum;&#125; </span></span><br><span class="line">    seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum); </span><br><span class="line"><span class="javascript">    snum = <span class="built_in">Math</span>.round(seconds); <span class="keyword">if</span>(<span class="built_in">String</span>(snum).length ==<span class="number">1</span> )&#123;snum = <span class="string">"0"</span> + snum;&#125; </span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"timeDate"</span>).innerHTML = <span class="string">"æœ¬ç«™å·²å®‰å…¨è¿è¡Œ "</span>+dnum+<span class="string">" å¤© "</span>; </span></span><br><span class="line"><span class="javascript">    <span class="built_in">document</span>.getElementById(<span class="string">"times"</span>).innerHTML = hnum + <span class="string">" å°æ—¶ "</span> + mnum + <span class="string">" åˆ† "</span> + snum + <span class="string">" ç§’"</span>; </span></span><br><span class="line">  &#125; </span><br><span class="line"><span class="actionscript">  setInterval(<span class="string">"createtime()"</span>,<span class="number">250</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="èƒŒæ™¯æ˜¾ç¤ºé£˜åŠ¨çš„å½©å¸¦"><a href="#èƒŒæ™¯æ˜¾ç¤ºé£˜åŠ¨çš„å½©å¸¦" class="headerlink" title="èƒŒæ™¯æ˜¾ç¤ºé£˜åŠ¨çš„å½©å¸¦"></a>èƒŒæ™¯æ˜¾ç¤ºé£˜åŠ¨çš„å½©å¸¦</h4><ul>
<li><p>åŒä¸Šlayoutï¼š</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/wallleap/cdn/js/piao.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>èƒŒæ™¯æ˜¾ç¤ºåˆ†å­çŠ¶çº¿æ¡</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/wallleap/cdn/js/canvas-nest.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="æ¨±èŠ±é£˜è½æˆ–é›ªèŠ±é£˜è½"><a href="#æ¨±èŠ±é£˜è½æˆ–é›ªèŠ±é£˜è½" class="headerlink" title="æ¨±èŠ±é£˜è½æˆ–é›ªèŠ±é£˜è½"></a>æ¨±èŠ±é£˜è½æˆ–é›ªèŠ±é£˜è½</h4><ul>
<li>æ¨±èŠ±srcï¼š_<a href="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/sakura.js_åŒä¸Šä½ç½®" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/wallleap/cdn/js/sakura.js_åŒä¸Šä½ç½®</a></li>
<li>é›ªèŠ±src: _<a href="https://cdn.jsdelivr.net/gh/wallleap/cdn/js/xuehuapiaoluo.js_æˆ–è€…_https://cdn.jsdelivr.net/gh/wallleap/cdn/js/snow.js_é€‰æ‹©ä¸€ä¸ª" target="_blank" rel="noopener">https://cdn.jsdelivr.net/gh/wallleap/cdn/js/xuehuapiaoluo.js_æˆ–è€…_https://cdn.jsdelivr.net/gh/wallleap/cdn/js/snow.js_é€‰æ‹©ä¸€ä¸ª</a></li>
</ul>
<h4 id="ç¦ç”¨æŒ‰é”®"><a href="#ç¦ç”¨æŒ‰é”®" class="headerlink" title="ç¦ç”¨æŒ‰é”®"></a>ç¦ç”¨æŒ‰é”®</h4><ul>
<li><p>ç¦ç”¨äº†å³é”®F12ç­‰</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.jsdelivr.net/gh/wallleap/cdn/js/noSomeKey.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ul>
<h4 id="wordcout"><a href="#wordcout" class="headerlink" title="wordcout"></a>wordcout</h4><ul>
<li><p>åœ¨ä¸»é¢˜æœ‰å­—æ®µpost_wordcoutï¼šéœ€è¦å…ˆnpmä¸‹è½½hexo-wordcoutæ‰èƒ½ç”¨</p>
</li>
<li><p>å¦å¤–é»˜è®¤æ²¡æœ‰å•ä½ï¼Œä¿®æ”¹themes\next\layout_macro\post.swigï¼šä¾‹å¦‚</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">title</span>=<span class="string">"&#123;&#123; __('post.min2read') &#125;&#125;"</span>&gt;</span></span><br><span class="line">   &#123;&#123; min2read(post.content) &#125;&#125; åˆ†é’Ÿ</span><br><span class="line"> <span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure>



</li>
</ul>
<h4 id="æ›´å¤šç‰¹æ•ˆ"><a href="#æ›´å¤šç‰¹æ•ˆ" class="headerlink" title="æ›´å¤šç‰¹æ•ˆ"></a>æ›´å¤šç‰¹æ•ˆ</h4><ul>
<li><a href="https://blog.csdn.net/u011475210/article/details/79023429#comments" target="_blank" rel="noopener">æ’­æ”¾å™¨å¤´åƒæ—‹è½¬ç­‰</a>ã€<a href="https://blog.csdn.net/weixin_43738731/article/details/85843474" target="_blank" rel="noopener">nextæ·±åº¦å®šåˆ¶</a>ã€æ·»åŠ æ–‡ç« é˜…è¯»é‡ç»Ÿè®¡åŠŸèƒ½ï¼ˆnextæ–‡æ¡£ç¬¬ä¸‰æ–¹æœåŠ¡éƒ¨åˆ†ï¼šè®°å¾—æ‰‹åŠ¨åŠ Counterç±»ï¼‰ã€æ•°æ®ç»Ÿè®¡ä¸åˆ†æ</li>
</ul>
<h4 id="è§£å†³æ—¶å»¶é—®é¢˜"><a href="#è§£å†³æ—¶å»¶é—®é¢˜" class="headerlink" title="è§£å†³æ—¶å»¶é—®é¢˜"></a>è§£å†³æ—¶å»¶é—®é¢˜</h4><p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAMAAABOo35HAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAC9UExURVlZWdPT07KysmRkZIWFhfT09JmZmWZmZm9vb39/fxkZGUxMTDMzM3p6epCQkKamppubm729venp6cjIyN7e3tbW1s/Pz8LCwnx8fLS0tFZWVoiIiI+Pj6GhoeTk5Glpabu7u93d3evr66CgoJSUlKqqqsnJyeDg4Hd3d8PDw+Xl5bi4uNHR0dvb26Ojo6urq+fn51hYWDg4OCgoKHBwcK2traenp0FBQe7u7vHx8U5OTre3t8zMzHV1df///7GrnpQAAAA/dFJOU///////////////////////////////////////////////////////////////////////////////////AI4mfBcAAAUGSURBVHja7NoJb6M4GMZxY0NCD64kve/pMZ2d3Z297+X7f6zFNmBAMUXa6URl/q9UJSWPUPzrizFWRUlNLgEBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYYIEFAVhggQUWWGBBABZYYIEFFlgQgAUWWGCBBRYEYIEFFlhggQUBWGCBBRZYYEEAFlhggQUWWBCABRZYYIEFFgRggQUWWGCBBQFYYIEFFlhgQQAWWGCBBRZYEIAFFlhggQUWBGCBBRZYn6cCIcRXgvX/h9qcIVBqDdbEM8RCxGCB9QqXYRwHYDHBgwXWl8eKZKiESHI3Ba1kWs3fKixcaJUl1YyeBm7Ocq+yLItUiVBGnXxenSHJolIKEcwHq6ikbOX1YGVzQCTN8LPmSLreghUl9sN4Uw7yajMrLC0TZ1ImzqY6FEop0+pIaEN5HaoOxVuwEqFyc4I46uSlzOLqgxlh6UaR9l3VYWl9Fdoxb1Q90KJtu41pwwFW/WHhTtW8i7TafLCqRsk6bsGw63L9qurXRmuIlbT9lDQnlXU+nBFW1Q2qnZbDprWa2tjR90LZFqx1/+Td/HpGWLlrLDvIwTcx6dQ1Vrntbig68cDms3JwbA5Y1azs1ger6sNV/bbIw1jU81MvNAGrl58RVn8ozW+btF08iGFoAlYvP3csfVur1gJBEIA1uBmue5dhZDOyO2epbmgCVi8/I6x0MMHH9pjsTfBhNzQBq5uPZoQlB0uH3DZG4EZqQ26fL3sZq5uf09Ih6qw3i/pm6BZO0qZX7rrUS68Xsbr5ZE4rePMk08pk9aUZugfqppvs6AM1Acvlo/StP+6EbW06z8hJqxbYp2BZPQUnFsLsKuhQdaHqn5ewbF7KXIn0jWO5MqOQ7RaNLPtbNMmmhimj0GUmYLl8Gs0Lq4wyPbTu1l2QKqHSouzs3OlDIslW5SQsnY/NXmFplyNvEuuLV/Tau9BzwiraDUSwXmysztYWWNtL1psXeumgIrDGaqXvBfUuvtqUYI3V2t1wk1e2msFluJJm6zDJXv/fIfjPP7DAAgsssCiwwAILLLDAosACCyywwAKLAgsssMACC6zt9fDz/v75tyOB+98PD2+ORgKffjw4OP1uJPDxl+Xy8v1I4MPF3t7VNyOB4/vF4uzdzrG+39f1kz/w66Guv/yBvw90KX/gZKkr8Qf+2dOV+gNHC12/7RxrabD2/a31bLAO/a11YbAO/K21MFhLf2s9Gqw9f2vdGqzFu11jnVusE2/gxmI9eQOnFuvYG7i0WH7uK4t15w2cWazrXWP9a7H8f/bQYvm/6IPF+sF/pVssf19Ii/WH/0K2WH/uGuvEWC39gSdj9Twy+Rqri5EZx1gt/IE7Y/XoD1wbq9vd3w1PlufnD2OBp+ebm/uxwPHF6emnscDR4vLy41jg7vHq6sNY4Pr27OyYdRaLUrDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssMCiwAILLLDAAosCCyywwAILLAossMACCyywKLDAAgsssL6u+k+AAQCR9eHtLKvLfwAAAABJRU5ErkJggg==" data-original="https://kivid.github.io/blog/image/%E8%A7%A3%E5%86%B3%E6%97%B6%E5%BB%B6.png" alt="éœ€è¦æ ¹æ®publicç»“æ„"></p>
<ul>
<li>å‘å¸ƒåå‘ç°åŠ è½½è¿‡æ…¢äºæ˜¯çœ‹çœ‹æ˜¯ä»€ä¹ˆåŸå› ã€‚ç¬¬ä¸€ä¸ªæ˜¯fontå³è°·æ­Œå­—ä½“çš„é•œåƒç½‘ç«™æ— æ³•è®¿é—®ï¼Œæœ¬æ¥æŸ¥äº†äº›é•œåƒç«™å‘ç°ä¸ä¼šç”¨ï¼Œè€ŒåŸæœ¬é»˜è®¤çš„å±…ç„¶èƒ½è®¿é—®äºæ˜¯åœ¨ä¸»é¢˜é…ç½®æ–‡ä»¶ä¸­æ›´æ”¹fontå­—æ®µä¸‹çš„hostã€‚</li>
<li>ç¬¬äºŒä¸ªæ˜¯disqç¬¬ä¸‰æ–¹è¯„è®ºç½‘ç«™è¢«å¢™ï¼Œåªéœ€å°†å…¶å­—æ®µè®¾falseã€‚</li>
<li>è¿˜æœ‰ä¸ªæ˜¯headçš„èƒŒæ™¯å›¾ç‰‡urlå¤±æ•ˆå»ä¸»é¢˜åšä¸»ç½‘ç«™<a href="https://notes.doublemine.me/images/header-background.jpg" target="_blank" rel="noopener">ä¸‹è½½äº†</a>ï¼ˆä¸çŸ¥é“ä¸ºä»€ä¹ˆèƒ½Getåˆ°å¯èƒ½æ˜¯æœ¬åœ°çš„ï¼‰ã€‚ä½†æœ¬åœ°åº”ç”¨ç”±äºhexoç”Ÿæˆpublicæ–‡ä»¶å¤¹å‘å¸ƒä¼šæ‰¾ä¸åˆ°äºæ˜¯ä½¿ç”¨å…¶urlï¼ˆåœ¨head-styleæ–‡ä»¶ï¼‰</li>
<li>Aplayeræ˜¯jsæ²¡æœ‰æ‰¾åˆ°ï¼ŒæŸ¥çœ‹åšå®¢çš„repoæ–‡ä»¶ã€‚</li>
<li>ç½‘æ˜“äº‘å¤–é“¾åœ¨åšå®¢åªèƒ½ç‚¹å‡»å‡ é¦–æ­Œï¼Œåœ¨è¿™é‡Œå‘ç°æ˜¯å¤–é“¾é—®é¢˜ã€‚ä¾æ¬¡å¯¹å•æ›²äº§ç”Ÿå¤–é“¾å‘ç°æ˜¯ç‰ˆæƒé—®é¢˜ã€‚</li>
</ul>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><ul>
<li><p>æ­å»ºhexoåšå®¢å·²ç»æ˜¯ä¸€æœä¸€å¤§ç‰‡ã€‚å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡åšå…ˆå¼„æ¸…æ¥šå‰ç«¯ç›¸å…³çŸ¥è¯†ï¼Œå†ä»hexoç†è§£å’Œæ–‡æ¡£å…¥æ‰‹ã€‚é…ç½®å¥½ç¯å¢ƒæ¡ä»¶ï¼šèƒ½ç”Ÿæˆä¸€ä¸ªæœ¬åœ°èƒ½è®¿é—®çš„å‰ç«¯ã€‚å†è€…å°±æ˜¯é…ç½®åŸºç¡€é¡¹å¯è§æ–‡æ¡£ï¼Œå¦‚ä½•å‘å¸ƒæ–‡æ¡£å’Œä¸Šé¢å·²ç»è¯´æ˜ã€‚åªæ˜¯å‘æ–‡åˆ°æ­¤å¯æ­¢ã€‚</p>
</li>
<li><p>ç¾åŒ–åšå®¢å°±åƒDIYï¼ˆåƒæˆ‘ä»¬è¿™ç§åç«¯ï¼‰ç®€ç›´å°±æ˜¯ä¸œæ‹¼è¥¿å‡‘ã€‚ç¬¬ä¸€æ­¥æ˜¯æ¢ä¸ªç”Ÿæ€å¥½çš„ï¼Œç¨³å®šç»´æŠ¤çš„ä¸»é¢˜ï¼Œæˆ‘ç”¨çš„æ˜¯é­”æ”¹çš„Nextã€‚æ–‡æ¡£ä¹‹å…¨é¢è®©æˆ‘ä»¬ä¸ä»£ç åˆ†ç¦»å¼€æ¥ã€‚ä¸‹é¢å°±æ˜¯æœ¬åšå®¢çš„ä¸»è¦å¾—åˆ†ã€‚</p>
</li>
</ul>
<ol>
<li><p>å…ˆæ˜¯åšå®¢æ’ä»¶ã€‚ç¬¬ä¸€ä¸ªå°±æ˜¯ç»™é™æ€åšå®¢æ·»åŠ è¯„è®ºç³»ç»Ÿï¼Œå‚è€ƒæ–‡æ¡£å‘ç°nextåŠ å…¥äº†è¯¸å¤šç¬¬ä¸‰æ–¹è¯„è®ºç³»ç»Ÿã€‚ä¾‹å¦‚valineã€gitmentã€æ¥å¿…åŠ›ç­‰ã€‚ä½¿ç”¨æ–¹æ³•éƒ½å¾ˆç®€å•ï¼Œæ³¨å†Œæ‹¿åˆ°appidå’Œappkey æ’å…¥åˆ°ä¸»é¢˜é…ç½®æ–‡ä»¶çš„ç›¸åº”å­—æ®µã€‚</p>
</li>
<li><p>è¿˜æœ‰å°±æ˜¯æ–‡ç« å­—æ•°æ˜¾ç¤ºæµè§ˆæ¬¡æ•°ç”¨çš„wordcountå’Œleancloudéƒ½åœ¨æ–‡æ¡£æœ‰æ¥å£</p>
</li>
<li><p>å¦å¤–å°±æ˜¯å‚è€ƒdiygodåšå®¢çš„å°äº¤äº’ï¼Œä¾‹å¦‚ç‚¹å‡»çƒŸèŠ±ï¼Œå¸åº•apalyerï¼ŒèƒŒæ™¯ç‚¹å‡»å˜åŒ–</p>
</li>
<li><p>è¿˜æœ‰äº›tipsï¼šæ‘˜è¦åˆ†å‰²ï¼ˆéœ€æ”¹ä¸»é¢˜é…ç½®ï¼‰ï¼Œåšå®¢è¾¹ç•Œé˜´å½±ï¼Œçœ‹æ¿å¨˜ï¼Œè¯„è®ºåŒºåŠ å…¥æ¯æ—¥ä¸€è¯å’Œæ­£åˆ™æ£€éªŒï¼Œæ–‡ç« åŠ å¯†ï¼Œsideï¼šå¤´åƒè½¬åŠ¨ï¼Œåˆ’å…¥æ˜¾ç¤ºé“¾æ¥ã€‚</p>
<p>PSï¼šç‚¹å‡»èœå•é“¾æ¥ä¸­æœ‰%20åº”è¯¥æ˜¯ç©ºæ ¼å­—ç¬¦è½¬ä¹‰ï¼Œåˆ é™¤||å‰é¢ç©ºæ ¼å¯ç”¨ã€‚èœå•ä¸­é™¤äº†aboutå’Œ404éœ€è¦å†™å…¶ä»–éƒ½èƒ½ç”Ÿæˆã€‚</p>
</li>
<li><p>ç°åœ¨è¿˜æœ‰ä¸ªç‚¹æ˜¯valine adminæ²¡æœ‰éƒ¨ç½²ï¼ˆè¯„è®ºé‚®ä»¶é€šçŸ¥ï¼‰ï¼Œå› ä¸ºleancloudæ²¡é…ç½®å¥½ï¼Œå¯èƒ½è¦å¦å¤–åŸŸåæ¥ç»‘å®šæ‰è¡Œ.</p>
</li>
</ol>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>Githubpages</tag>
        <tag>Hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>Hello World</title>
    <url>/blog/2020/05/05/hello-world/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html" target="_blank" rel="noopener">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>ç»™æ–‡ç« åŠ å¯†</title>
    <url>/blog/2020/05/07/%E7%BB%99%E6%96%87%E7%AB%A0%E5%8A%A0%E5%AF%86/</url>
    <content><![CDATA[<p>Nextä¸»é¢˜æ²¡æœ‰å‘ç°å†…ç½®åŠ å¯†ï¼Œè¯•è¯•è„šæœ¬åŠ å¯†</p>
<a id="more"></a>
<h4 id="å®ç°æ–¹æ³•"><a href="#å®ç°æ–¹æ³•" class="headerlink" title="å®ç°æ–¹æ³•"></a>å®ç°æ–¹æ³•</h4><ul>
<li>åœ¨ä¸»é¢˜æ–‡ä»¶ä¸‹layout/_partials/head.swigæ’å…¥å¦‚ä¸‹ä»£ç <figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="actionscript">    (<span class="function"><span class="keyword">function</span><span class="params">()</span></span>&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">if</span>(<span class="string">'&#123;&#123; page.password &#125;&#125;'</span>)&#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">if</span> (prompt(<span class="string">'è¯·è¾“å…¥æ–‡ç« å¯†ç '</span>) !== <span class="string">'&#123;&#123; page.password &#125;&#125;'</span>)&#123;</span></span><br><span class="line"><span class="actionscript">                alert(<span class="string">'å¯†ç é”™è¯¯ï¼'</span>);</span></span><br><span class="line">                history.back();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)();</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></li>
<li>ç„¶åå†™æ–‡ç« åŠ ä¸ªpasswordå­—æ®µç±»ä¼¼<br>titile: your title<br>password: your password</li>
</ul>
]]></content>
      <categories>
        <category>blog</category>
      </categories>
      <tags>
        <tag>blog</tag>
      </tags>
  </entry>
  <entry>
    <title>Tensorflowå­¦ä¹ ç¬”è®°(ä¸€ï¼‰</title>
    <url>/blog/2020/05/08/tensorflow%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<pre><code>æœ¬æ–‡å›å¿†å­¦ä¹ tensorflowçš„ç»éªŒå’Œæ€»ç»“
&lt;!--more--&gt;</code></pre><blockquote>
<p>æƒ³å­¦ä¹ tfçš„äººï¼Œæˆ–è®¸å•ƒå®Œäº†ç½‘ä¸Šçš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ï¼ˆå´æ©è¾¾ï¼‰ï¼Œæˆ–è®¸æ­£åœ¨ä¸Šå­¦æ ¡é‡Œçš„æœºå™¨å­¦ä¹ è¯¾ç¨‹ï¼ŒæŠ‘æˆ–æ˜¯åªè§£çš®æ¯›è€Œæƒ³å¿«é€Ÿå…¥é—¨ã€‚<br>å­¦å‰å»ºè®®ï¼š<br> 1.å¯¹äºæ²¡æœ‰ä»»ä½•åŸºç¡€çš„å…„å°è¿˜æ˜¯è€è€å®å®çš„å›å»çœ‹çœ‹é«˜æ•°ï¼Œä¸ç„¶èµ°ä¸ä¸‹å»ã€‚<br> 2.å¯¹äºæ­£åœ¨å­¦æœºå™¨å­¦ä¹ çš„äººæ¥è¯´ï¼Œä½ æˆ–è®¸å·²ç»äº†è§£æ¢¯åº¦ä¸‹é™ï¼ŒçŸ¥é“è‹¥å¹²ç§æŸå¤±å‡½æ•°æ¿€æ´»å‡½æ•°ï¼Œä½†å»ºè®®å…ˆè‡ªå·±åŠ¨æ‰‹åšç½‘ç»œæ„å»ºèµ°åŸºç¡€è·¯çº¿ã€‚ä¾‹å¦‚å´æ©è¾¾è¯¾ç¨‹å’Œæœ¬äºº<a href="https://github.com/microsoft/ai-edu/tree/master/A-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B" target="_blank" rel="noopener">ç”¨çš„</a>ï¼ˆåŸºäºpythonï¼‰ã€‚<br> 3.å¯¹äºåŸºç¡€æ‰å®çš„åŒå­¦æ¥è¯´ï¼Œtfå°†ä¼šæ˜¯ä½ å¤§æœ‰ä½œä¸ºçš„èˆå°ã€‚å°½ç®¡å»çœ‹é‚£äº›ç½‘ä¸Šä¸°å¯Œçš„æ–‡æ¡£ç›¸ä¿¡ä½ ä¸ä¼šè¿·è·¯ã€‚</p>
</blockquote>
<h4 id="å…³äºæ­å»ºç¯å¢ƒ"><a href="#å…³äºæ­å»ºç¯å¢ƒ" class="headerlink" title="å…³äºæ­å»ºç¯å¢ƒ"></a>å…³äºæ­å»ºç¯å¢ƒ</h4><p>  å¦‚æœæ˜¯åˆå­¦TFå»ºè®®ä½¿ç”¨cpuç‰ˆæœ¬ï¼Œè¿™æ ·çœå»è¯¸å¤šéº»çƒ¦ã€‚ä¾‹å¦‚gpuç‰ˆæœ¬éœ€è¦ç”µè„‘gpuæ”¯æŒï¼ˆnividiaï¼Œéœ€è¦é©±åŠ¨ï¼‰ï¼Œå¹¶ä¸”å®‰è£…cuDnnå’Œcudatoolkitï¼ˆéœ€è¦å’Œtensorflowç‰ˆæœ¬å¯¹åº”ï¼‰ï¼Œå¦å¤–pythoné«˜ç‰ˆæœ¬è¿˜æœªé€‚é…tensorflowæ‰€ä»¥ä¸èƒ½å®‰è£…è¿‡é«˜ç‰ˆæœ¬ï¼Œæ­¤æ—¶anacondaé—ªäº®ç™»åœºï¼Œå®ƒä¸ä»…èƒ½è™šæ‹Ÿç¯å¢ƒè®©pyã€åŒ…ç­‰ä¸ç³»ç»Ÿéš”ç¦»å¼€ï¼ŒæŒ‡å®špythonç‰ˆæœ¬å’Œè‡ªåŠ¨ä¸‹ç›¸åº”cudaæ­é…ã€‚å½“ç„¶å¦‚æœç”¨cpuç‰ˆæœ¬æ— éœ€è€ƒè™‘ã€‚</p>
  <figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line">print(tf.__version__) <span class="comment">#æ‰“å°å³æˆåŠŸ</span></span><br></pre></td></tr></table></figure>

<h4 id="å…³äºkeraså’Œtf-keras"><a href="#å…³äºkeraså’Œtf-keras" class="headerlink" title="å…³äºkeraså’Œtf.keras"></a>å…³äºkeraså’Œtf.keras</h4><p>  ç°åœ¨éƒ½æ˜¯ç›´æ¥ä¸‹è½½tensorflowé‡Œé¢å†…ç½®äº†kerasï¼Œå®˜æ–¹ä¹Ÿæ¨èä½¿ç”¨åè€…ï¼Œç›¸å½“äºåè€…æ˜¯å°†å…¶æ”¶çº³äº†ï¼Œå®é™…ä¸Šå…³ç³»æ˜¯ï¼štensorflowä½œä¸ºå…¶è®¡ç®—å·¥å…·ï¼Œåè€…æ˜¯tensorflowçš„é«˜çº§apiï¼Œç®€å•æ¥è¯´å°±æ˜¯åä½œå…³ç³»ï¼Œkerasæ˜¯åªç¬”ï¼Œtensorflowæ˜¯å¼ çº¸ã€‚</p>
<h4 id="åˆè¯†Tensorflow"><a href="#åˆè¯†Tensorflow" class="headerlink" title="åˆè¯†Tensorflow"></a>åˆè¯†Tensorflow</h4><blockquote>
<p>å‰é¦ˆç¥ç»ç½‘ç»œï¼š<strong>åˆ†ä¸ºå¤šå±‚, ç›¸é‚»å±‚ä¹‹é—´å…¨è¿æ¥, ä¸å­˜åœ¨åŒå±‚è¿æ¥ä¸è·¨å±‚è¿æ¥</strong>. æ•´ä¸ªç½‘ç»œä¸­æ— åé¦ˆï¼Œå¯ç”¨ä¸€ä¸ªæœ‰å‘æ— ç¯å›¾è¡¨ç¤º.ç”¨æ ‡å‡†bpç®—æ³•è®­ç»ƒï¼ˆåŸºäºSDGï¼‰ã€‚</p>
<p>ä»¥ä¸‹ä»ç‰¹æ€§åˆ°å»ºç«‹æ¨¡å‹å’Œè®­ç»ƒã€‚ä»ä»£ç å®æˆ˜å¼€å§‹</p>
</blockquote>
<ol>
<li>äº†è§£å…¶ç‰¹æ•ˆå’ŒåŸºç¡€â€“è‡ªåŠ¨æ±‚å¯¼æœºåˆ¶</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">x = tf.Variable(initial_value=<span class="number">3.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">  y = <span class="number">3</span>*tf.square(x)</span><br><span class="line">  z = y+<span class="number">3</span>*x</span><br><span class="line">z_grad = tape.gradient(z,x)</span><br><span class="line">print(y,z,z_grad)</span><br><span class="line"><span class="comment">#åˆ©ç”¨å…¶æ±‚åå¯¼</span></span><br><span class="line">X = tf.constant([[<span class="number">1.</span>, <span class="number">2.</span>], [<span class="number">3.</span>, <span class="number">4.</span>]])</span><br><span class="line">y = tf.constant([[<span class="number">1.</span>], [<span class="number">2.</span>]])</span><br><span class="line">w = tf.Variable(initial_value=[[<span class="number">1.</span>], [<span class="number">2.</span>]])</span><br><span class="line">b = tf.Variable(initial_value=<span class="number">1.</span>)</span><br><span class="line"><span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">    L = tf.reduce_sum(tf.square(tf.matmul(X, w) + b - y))</span><br><span class="line">w_grad, b_grad = tape.gradient(L, [w, b])        <span class="comment"># è®¡ç®—L(w, b)å…³äºw, bçš„åå¯¼æ•°</span></span><br><span class="line">print(L, w_grad, b_grad)</span><br><span class="line"></span><br><span class="line"><span class="comment"># çº¿æ€§å›å½’ç¤ºä¾‹ï¼šç”Ÿæˆdata</span></span><br><span class="line">X_raw = np.array([<span class="number">2013</span>, <span class="number">2014</span>, <span class="number">2015</span>, <span class="number">2016</span>, <span class="number">2017</span>], dtype=np.float32)</span><br><span class="line">y_raw = np.array([<span class="number">12000</span>, <span class="number">14000</span>, <span class="number">15000</span>, <span class="number">16500</span>, <span class="number">17500</span>], dtype=np.float32)</span><br><span class="line"></span><br><span class="line">X = (X_raw - X_raw.min()) / (X_raw.max() - X_raw.min())</span><br><span class="line">y = (y_raw - y_raw.min()) / (y_raw.max() - y_raw.min())</span><br><span class="line">X = tf.constant(X)</span><br><span class="line">y = tf.constant(y)</span><br><span class="line"></span><br><span class="line">a = tf.Variable(initial_value=<span class="number">0.</span>)</span><br><span class="line">b = tf.Variable(initial_value=<span class="number">0.</span>)</span><br><span class="line">variables=[a,b]</span><br><span class="line">num_epoch = <span class="number">10000</span></span><br><span class="line">opt = tf.keras.optimizers.SGD(learning_rate=<span class="number">5e-4</span>)</span><br><span class="line"><span class="keyword">for</span> e <span class="keyword">in</span> range(num_epoch):</span><br><span class="line">  <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">      y_pred = a * X + b</span><br><span class="line">      loss = tf.reduce_sum(tf.square(y_pred-y))</span><br><span class="line">  grads = tape.gradient(loss,variables)</span><br><span class="line">  opt.apply_gradients(grads_and_vars=zip(grads,variables))</span><br><span class="line">print(a,b)</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>åˆ›å»ºè‡ªå·±çš„æ¨¡å‹ä½œç”¨å¦‚ä¸Šé¢çš„è¿ç®—å’Œvariableï¼ˆä¸‹é¢çš„æ–¹æ³•éƒ½æ˜¯å„ç±»æ¡†æ¶é€šç”¨ï¼Œæ²¡æœ‰ä½¿ç”¨é«˜çº§apiï¼Œéƒ½æ˜¯è‡ªå®šä¹‰ç½‘ç»œï¼‰</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyModel</span><span class="params">(tf.keras.Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()     <span class="comment"># Python 2 ä¸‹ä½¿ç”¨ super(MyModel, self).__init__()</span></span><br><span class="line">        <span class="comment"># æ­¤å¤„æ·»åŠ åˆå§‹åŒ–ä»£ç ï¼ˆåŒ…å« call æ–¹æ³•ä¸­ä¼šç”¨åˆ°çš„å±‚ï¼‰ï¼Œä¾‹å¦‚</span></span><br><span class="line">        <span class="comment"># layer1 = tf.keras.layers.BuiltInLayer(...)</span></span><br><span class="line">        <span class="comment"># layer2 = MyCustomLayer(...)</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, input)</span>:</span></span><br><span class="line">        <span class="comment"># æ­¤å¤„æ·»åŠ æ¨¡å‹è°ƒç”¨çš„ä»£ç ï¼ˆå¤„ç†è¾“å…¥å¹¶è¿”å›è¾“å‡ºï¼‰ï¼Œä¾‹å¦‚</span></span><br><span class="line">        <span class="comment"># x = layer1(input)</span></span><br><span class="line">        <span class="comment"># output = layer2(x)</span></span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line">    <span class="comment"># è¿˜å¯ä»¥æ·»åŠ è‡ªå®šä¹‰çš„æ–¹æ³•</span></span><br><span class="line"><span class="comment">#ç”±äºç»§æ‰¿è‡ªmodelå…¶æœ‰variableè¿™ä¸€å±æ€§è·å–æ‰€æœ‰å˜é‡</span></span><br><span class="line"><span class="comment">#å°†ä¸Šä¾‹çš„y=ax+bæ¨¡å‹åŒ–</span></span><br><span class="line">X = tf.constant([[<span class="number">1.0</span>, <span class="number">2.0</span>, <span class="number">3.0</span>], [<span class="number">4.0</span>, <span class="number">5.0</span>, <span class="number">6.0</span>]])</span><br><span class="line">y = tf.constant([[<span class="number">10.0</span>], [<span class="number">20.0</span>]])</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Linear</span><span class="params">(tf.keras.Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.dense = tf.keras.layers.Dense(</span><br><span class="line">            units = <span class="number">1</span>,</span><br><span class="line">            activation=<span class="literal">None</span>,</span><br><span class="line">            kernel_initializer=tf.zeros_initializer(),</span><br><span class="line">            bias_initializer=tf.zeros_initializer()</span><br><span class="line"></span><br><span class="line">            )</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self,input)</span>:</span></span><br><span class="line">        output = self.dense(input)</span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line">model = Linear()</span><br><span class="line">optimizer = tf.keras.optimizers.SGD(learning_rate=<span class="number">0.01</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">100</span>):</span><br><span class="line">    <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">        y_pred = model(X)      <span class="comment"># è°ƒç”¨æ¨¡å‹ y_pred = model(X) è€Œä¸æ˜¯æ˜¾å¼å†™å‡º y_pred = a * X + b</span></span><br><span class="line">        loss = tf.reduce_mean(tf.square(y_pred - y))</span><br><span class="line">    grads = tape.gradient(loss, model.variables)    <span class="comment"># ä½¿ç”¨ model.variables è¿™ä¸€å±æ€§ç›´æ¥è·å¾—æ¨¡å‹ä¸­çš„æ‰€æœ‰å˜é‡</span></span><br><span class="line">    optimizer.apply_gradients(grads_and_vars=zip(grads, model.variables))</span><br><span class="line">print((model.variables),model.call(X))</span><br></pre></td></tr></table></figure>

<ol start="3">
<li>ç¼–å†™ä¸ªMLPå³å¤šå±‚å…¨è¿æ¥çš„å‰é¦ˆç¥ç»ç½‘ç»œï¼Œæ‰€çœ‹æ•™ç¨‹æœ€åçš„æ•°å­—è¯†åˆ«</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MNISTLoader</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        mnist = tf.keras.datasets.mnist <span class="comment">#ä¸‹é¢çš„loadå‡½æ•°ç¬¬ä¸€æ¬¡ä¼šdownload  </span></span><br><span class="line">        (self.train_data,self.train_label),(self.test_data,self.test_label) = mnist.load_data()</span><br><span class="line">        <span class="comment"># MNISTä¸­çš„å›¾åƒé»˜è®¤ä¸ºuint8ï¼ˆ0-255çš„æ•°å­—ï¼‰ã€‚ä»¥ä¸‹ä»£ç å°†å…¶å½’ä¸€åŒ–åˆ°0-1ä¹‹é—´çš„æµ®ç‚¹æ•°ï¼Œå¹¶åœ¨æœ€åå¢åŠ ä¸€ç»´ä½œä¸ºé¢œè‰²é€šé“</span></span><br><span class="line">        self.train_data = np.expand_dims(self.train_data.astype(np.float32) / <span class="number">255.0</span>, axis=<span class="number">-1</span>)      <span class="comment"># [60000, 28, 28, 1]</span></span><br><span class="line">        self.test_data = np.expand_dims(self.test_data.astype(np.float32) / <span class="number">255.0</span>, axis=<span class="number">-1</span>)        <span class="comment"># [10000, 28, 28, 1]</span></span><br><span class="line">        self.train_label = self.train_label.astype(np.int32)    <span class="comment"># [60000]</span></span><br><span class="line">        self.test_label = self.test_label.astype(np.int32)      <span class="comment"># [10000]</span></span><br><span class="line">        self.num_train_data, self.num_test_data = self.train_data.shape[<span class="number">0</span>], self.test_data.shape[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_batch</span><span class="params">(self, batch_size)</span>:</span></span><br><span class="line">        <span class="comment"># ä»æ•°æ®é›†ä¸­éšæœºå–å‡ºbatch_sizeä¸ªå…ƒç´ å¹¶è¿”å›</span></span><br><span class="line">        index = np.random.randint(<span class="number">0</span>, np.shape(self.train_data)[<span class="number">0</span>], batch_size)<span class="comment">#è¿”å›åˆ—è¡¨</span></span><br><span class="line">        <span class="keyword">return</span> self.train_data[index, :], self.train_label[index]</span><br><span class="line">data = MNISTLoader()</span><br><span class="line"><span class="comment"># print(data.train_data[0][],data.train_label) #traindata=(6000,28,28)</span></span><br><span class="line"><span class="comment"># test = np.array([[1,2],[2,3]])</span></span><br><span class="line"><span class="comment"># print(np.expand_dims(test/5,axis=-1)) è¿™ç§æ“ä½œç»“æœå¢åŠ ä¸€ç»´åº¦ä½†å®é™…ä¸å˜ï¼Œå¢åŠ çš„ä¸€ç»´å°±æ˜¯æ›¿æ¢æ‰åŸæœ¬</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MLP</span><span class="params">(tf.keras.Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__() </span><br><span class="line">        self.flatten = tf.keras.layers.Flatten() <span class="comment"># Flattenå±‚å°†é™¤ç¬¬ä¸€ç»´ï¼ˆbatch_sizeï¼‰ä»¥å¤–çš„ç»´åº¦å±•å¹³ ç”¨äºè¾“å…¥å±‚</span></span><br><span class="line">        self.dense1 = tf.keras.layers.Dense(units=<span class="number">256</span>,activation=tf.nn.relu)<span class="comment">#åˆå§‹accuracy: 0.928500ï¼Œloss=0.15</span></span><br><span class="line">        self.dense2 = tf.keras.layers.Dense(units=<span class="number">64</span>,activation=tf.nn.relu)<span class="comment">#åŠ äº†è¿™å±‚åaccuracy: 0.935200ï¼Œlossé™åˆ°äº†0.08ï¼Œå¦‚æœæ˜¯sigmiodæ¯”åˆå§‹è¿˜å·®</span></span><br><span class="line">        self.dense3 = tf.keras.layers.Dense(units=<span class="number">10</span>)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self,inputs)</span>:</span></span><br><span class="line">        x = self.flatten(inputs)</span><br><span class="line">        x = self.dense1(x)</span><br><span class="line">        x = self.dense2(x)</span><br><span class="line">        x = self.dense3(x)</span><br><span class="line">        output = tf.nn.softmax(x)</span><br><span class="line">        <span class="keyword">return</span> output</span><br></pre></td></tr></table></figure>

<ol start="4">
<li>mnistå†ç”¨å·ç§¯ç¥ç»ç½‘ç»œæ¥åˆ†ç±»é™¤äº†å…¨è¿æ¥å±‚è¿˜æœ‰æ± åŒ–å·ç§¯ï¼Œç”¨æ—¶ç¿»å€ä½†å‡†ç¡®ç‡ä¹Ÿé«˜</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CNN</span><span class="params">(tf.keras.Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.conv1 = tf.keras.layers.Conv2D(</span><br><span class="line">            filters=<span class="number">32</span>,             <span class="comment"># å·ç§¯å±‚ç¥ç»å…ƒï¼ˆå·ç§¯æ ¸ï¼‰æ•°ç›®</span></span><br><span class="line">            kernel_size=[<span class="number">5</span>, <span class="number">5</span>],     <span class="comment"># æ„Ÿå—é‡å¤§å°</span></span><br><span class="line">            padding=<span class="string">'same'</span>,         <span class="comment"># paddingç­–ç•¥ï¼ˆvaild æˆ– sameï¼‰</span></span><br><span class="line">            activation=tf.nn.relu   <span class="comment"># æ¿€æ´»å‡½æ•°</span></span><br><span class="line">        )</span><br><span class="line">        self.pool1 = tf.keras.layers.MaxPool2D(pool_size=[<span class="number">2</span>, <span class="number">2</span>], strides=<span class="number">2</span>)</span><br><span class="line">        self.conv2 = tf.keras.layers.Conv2D(</span><br><span class="line">            filters=<span class="number">64</span>,</span><br><span class="line">            kernel_size=[<span class="number">5</span>, <span class="number">5</span>],</span><br><span class="line">            padding=<span class="string">'same'</span>,</span><br><span class="line">            activation=tf.nn.relu</span><br><span class="line">        )</span><br><span class="line">        self.pool2 = tf.keras.layers.MaxPool2D(pool_size=[<span class="number">2</span>, <span class="number">2</span>], strides=<span class="number">2</span>)</span><br><span class="line">        self.flatten = tf.keras.layers.Reshape(target_shape=(<span class="number">7</span> * <span class="number">7</span> * <span class="number">64</span>,))</span><br><span class="line">        self.dense1 = tf.keras.layers.Dense(units=<span class="number">1024</span>, activation=tf.nn.relu)</span><br><span class="line">        self.dense2 = tf.keras.layers.Dense(units=<span class="number">10</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs)</span>:</span></span><br><span class="line">        x = self.conv1(inputs)                  <span class="comment"># [batch_size, 28, 28, 32]</span></span><br><span class="line">        x = self.pool1(x)                       <span class="comment"># [batch_size, 14, 14, 32]</span></span><br><span class="line">        x = self.conv2(x)                       <span class="comment"># [batch_size, 14, 14, 64]</span></span><br><span class="line">        x = self.pool2(x)                       <span class="comment"># [batch_size, 7, 7, 64]</span></span><br><span class="line">        x = self.flatten(x)                     <span class="comment"># [batch_size, 7 * 7 * 64]</span></span><br><span class="line">        x = self.dense1(x)                      <span class="comment"># [batch_size, 1024]</span></span><br><span class="line">        x = self.dense2(x)                      <span class="comment"># [batch_size, 10]</span></span><br><span class="line">        output = tf.nn.softmax(x)</span><br><span class="line">        <span class="keyword">return</span> output</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#è®­ç»ƒMnistçš„æ–¹æ³•ï¼Œä¼ å…¥æ„é€ çš„æ¨¡å‹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trainMLP</span><span class="params">(model)</span>:</span>    </span><br><span class="line">    batch_size = <span class="number">100</span></span><br><span class="line">    num_epochs = <span class="number">3</span></span><br><span class="line">    learning_rate = <span class="number">0.008</span> <span class="comment">#è°ƒè¯•å„ä¸ªå‚æ•°æé«˜å‡†ç¡®ç‡,åœ¨ç¿»å€epochåè¾¾åˆ°äº†97</span></span><br><span class="line">    <span class="comment"># model = Model()</span></span><br><span class="line">    data_loader = MNISTLoader()</span><br><span class="line">    opt = tf.keras.optimizers.Adam(learning_rate)</span><br><span class="line">    num_batches = int(data_loader.num_train_data // batch_size * num_epochs)</span><br><span class="line">    <span class="keyword">for</span> batch_index <span class="keyword">in</span> range(num_batches):</span><br><span class="line">        X, y = data_loader.get_batch(batch_size)</span><br><span class="line">        <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">            y_pred = model(X)</span><br><span class="line">            loss = tf.keras.losses.sparse_categorical_crossentropy(y_true=y, y_pred=y_pred)</span><br><span class="line">            loss = tf.reduce_mean(loss)</span><br><span class="line">            print(<span class="string">"batch %d: loss %f"</span> % (batch_index, loss.numpy()))</span><br><span class="line">        grads = tape.gradient(loss, model.variables)</span><br><span class="line">        opt.apply_gradients(grads_and_vars=zip(grads, model.variables))</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">metrics</span><span class="params">()</span>:</span></span><br><span class="line">        sparse_categorical_accuracy = tf.keras.metrics.SparseCategoricalAccuracy()</span><br><span class="line">        num_batches = int(data_loader.num_test_data // batch_size)</span><br><span class="line">        <span class="keyword">for</span> batch_index <span class="keyword">in</span> range(num_batches):</span><br><span class="line">            start_index, end_index = batch_index * batch_size, (batch_index + <span class="number">1</span>) * batch_size</span><br><span class="line">            y_pred = model.predict(data_loader.test_data[start_index: end_index])</span><br><span class="line">            sparse_categorical_accuracy.update_state(y_true=data_loader.test_label[start_index: end_index], y_pred=y_pred)</span><br><span class="line">        print(<span class="string">"test accuracy: %f"</span> % sparse_categorical_accuracy.result())</span><br><span class="line">    metrics()        </span><br><span class="line"><span class="comment"># traincnn()</span></span><br><span class="line"><span class="comment"># print(model.variables)åœ¨è®­ç»ƒå‰ä¸ºç©ºåˆ—è¡¨</span></span><br></pre></td></tr></table></figure>
<ol start="5">
<li><p>å¾ªç¯ç¥ç»ç½‘ç»œï¼šæ–‡æœ¬å¤„ç†ï¼Œtaskä»¥RNNç”Ÿæˆå°¼é‡‡é£æ ¼æ–‡æœ¬ã€‚</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TextLoader</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        path = tf.keras.utils.get_file(<span class="string">'nietzsche.txt'</span>,</span><br><span class="line">            origin=<span class="string">'https://s3.amazonaws.com/text-datasets/nietzsche.txt'</span>)</span><br><span class="line">        <span class="keyword">with</span> open(path, encoding=<span class="string">'utf-8'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            self.raw_text = f.read().lower()</span><br><span class="line">        self.chars = sorted(list(set(self.raw_text)))</span><br><span class="line">        self.char_indices = dict((c, i) <span class="keyword">for</span> i, c <span class="keyword">in</span> enumerate(self.chars))</span><br><span class="line">        self.indices_char = dict((i, c) <span class="keyword">for</span> i, c <span class="keyword">in</span> enumerate(self.chars))</span><br><span class="line">        self.text = [self.char_indices[c] <span class="keyword">for</span> c <span class="keyword">in</span> self.raw_text]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_batch</span><span class="params">(self, seq_length, batch_size)</span>:</span></span><br><span class="line">        seq = []</span><br><span class="line">        next_char = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> range(batch_size):</span><br><span class="line">            index = np.random.randint(<span class="number">0</span>, len(self.text) - seq_length)</span><br><span class="line">            seq.append(self.text[index:index+seq_length])</span><br><span class="line">            next_char.append(self.text[index+seq_length])</span><br><span class="line">        <span class="keyword">return</span> np.array(seq), np.array(next_char)       <span class="comment"># [batch_size, seq_length], [num_batch]</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RNN</span><span class="params">(tf.keras.Model)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, num_chars, batch_size, seq_length)</span>:</span></span><br><span class="line">        super().__init__()</span><br><span class="line">        self.num_chars = num_chars</span><br><span class="line">        self.seq_length = seq_length</span><br><span class="line">        self.batch_size = batch_size</span><br><span class="line">        self.cell = tf.keras.layers.LSTMCell(units=<span class="number">256</span>)</span><br><span class="line">        self.dense = tf.keras.layers.Dense(units=self.num_chars)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">call</span><span class="params">(self, inputs, from_logits=False)</span>:</span></span><br><span class="line">        inputs = tf.one_hot(inputs, depth=self.num_chars)       <span class="comment"># [batch_size, seq_length, num_chars]</span></span><br><span class="line">        state = self.cell.get_initial_state(batch_size=self.batch_size, dtype=tf.float32)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(self.seq_length):</span><br><span class="line">            output, state = self.cell(inputs[:, t, :], state)</span><br><span class="line">        logits = self.dense(output)</span><br><span class="line">        <span class="keyword">if</span> from_logits:</span><br><span class="line">            <span class="keyword">return</span> logits</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> tf.nn.softmax(logits)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">predict</span><span class="params">(self, inputs, temperature=<span class="number">1.</span>)</span>:</span></span><br><span class="line">        batch_size, _ = tf.shape(inputs)</span><br><span class="line">        logits = self(inputs, from_logits=<span class="literal">True</span>)</span><br><span class="line">        prob = tf.nn.softmax(logits / temperature).numpy()</span><br><span class="line">        <span class="keyword">return</span> np.array([np.random.choice(self.num_chars, p=prob[i, :])</span><br><span class="line">                         <span class="keyword">for</span> i <span class="keyword">in</span> range(batch_size.numpy())])</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">trainRnn</span><span class="params">()</span>:</span></span><br><span class="line">    num_batches = <span class="number">1000</span></span><br><span class="line">    seq_length = <span class="number">40</span></span><br><span class="line">    batch_size = <span class="number">50</span></span><br><span class="line">    learning_rate = <span class="number">1e-3</span></span><br><span class="line">    data_loader = TextLoader()</span><br><span class="line">    model = RNN(num_chars=len(data_loader.chars), batch_size=batch_size, seq_length=seq_length)</span><br><span class="line">    optimizer = tf.keras.optimizers.Adam(learning_rate=learning_rate)</span><br><span class="line">    <span class="keyword">for</span> batch_index <span class="keyword">in</span> range(num_batches):</span><br><span class="line">        X, y = data_loader.get_batch(seq_length, batch_size)</span><br><span class="line">        <span class="keyword">with</span> tf.GradientTape() <span class="keyword">as</span> tape:</span><br><span class="line">            y_pred = model(X)</span><br><span class="line">            loss = tf.keras.losses.sparse_categorical_crossentropy(y_true=y, y_pred=y_pred)</span><br><span class="line">            loss = tf.reduce_mean(loss)</span><br><span class="line">            print(<span class="string">"batch %d: loss %f"</span> % (batch_index, loss.numpy()))</span><br><span class="line">        grads = tape.gradient(loss, model.variables)</span><br><span class="line">        optimizer.apply_gradients(grads_and_vars=zip(grads, model.variables))</span><br><span class="line"></span><br><span class="line">    <span class="comment">#é›ªçƒå¼é¢„æµ‹ä¸‹ä¸ªchar</span></span><br><span class="line">    X_, _ = data_loader.get_batch(seq_length, <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">for</span> diversity <span class="keyword">in</span> [<span class="number">0.2</span>, <span class="number">0.5</span>, <span class="number">1.0</span>, <span class="number">1.2</span>]:</span><br><span class="line">        X = X_</span><br><span class="line">        print(<span class="string">"diversity %f:"</span> % diversity)</span><br><span class="line">        <span class="keyword">for</span> t <span class="keyword">in</span> range(<span class="number">400</span>):</span><br><span class="line">            y_pred = model.predict(X, diversity)</span><br><span class="line">            print(data_loader.indices_char[y_pred[<span class="number">0</span>]], end=<span class="string">''</span>, flush=<span class="literal">True</span>)</span><br><span class="line">            X = np.concatenate([X[:, <span class="number">1</span>:], np.expand_dims(y_pred, axis=<span class="number">1</span>)], axis=<span class="number">-1</span>)</span><br><span class="line">        print(<span class="string">"\n"</span>)</span><br><span class="line">trainRnn()</span><br></pre></td></tr></table></figure>
</li>
<li><p>åˆ©ç”¨kerasçš„é«˜çº§apiå»ºç«‹æ¨¡å‹ sequentialé€šè¿‡å‘ tf.keras.models.Sequential() æä¾›ä¸€ä¸ªå±‚çš„åˆ—è¡¨ï¼Œå°±èƒ½å¿«é€Ÿåœ°å»ºç«‹ä¸€ä¸ª tf.keras.Model æ¨¡å‹å¹¶è¿”å›ï¼š</p>
</li>
</ol>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">model = tf.keras.models.Sequential([</span><br><span class="line">    tf.keras.layers.Flatten(),</span><br><span class="line">    tf.keras.layers.Dense(<span class="number">100</span>,activation=tf.nn.sigmoid),</span><br><span class="line">    <span class="comment"># tf.keras.layers.Dense(64,activation=tf.nn.relu),</span></span><br><span class="line">    tf.keras.layers.Dense(<span class="number">10</span>),</span><br><span class="line">    tf.keras.layers.Softmax()</span><br><span class="line">    ])</span><br><span class="line"><span class="comment">#Keras æä¾›äº† Functional APIï¼Œå¸®åŠ©æˆ‘ä»¬å»ºç«‹æ›´ä¸ºå¤æ‚çš„æ¨¡å‹ï¼Œä¾‹å¦‚å¤šè¾“å…¥ / è¾“å‡ºæˆ–å­˜åœ¨å‚æ•°å…±äº«çš„æ¨¡å‹</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">FunctionalCreate</span><span class="params">()</span>:</span></span><br><span class="line">    inputs = tf.keras.Input(shape=(<span class="number">28</span>, <span class="number">28</span>, <span class="number">1</span>))</span><br><span class="line">    x = tf.keras.layers.Flatten()(inputs)</span><br><span class="line">    x = tf.keras.layers.Dense(units=<span class="number">100</span>, activation=tf.nn.relu)(x)</span><br><span class="line">    x = tf.keras.layers.Dense(units=<span class="number">10</span>)(x)</span><br><span class="line">    outputs = tf.keras.layers.Softmax()(x)</span><br><span class="line">    model = tf.keras.Model(inputs=inputs, outputs=outputs)</span><br><span class="line">    <span class="keyword">return</span> model</span><br><span class="line"><span class="comment"># trainMLP(MLP())</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">apitrain</span><span class="params">()</span>:</span></span><br><span class="line">    model = MLP()</span><br><span class="line">    <span class="comment">#ä½¿ç”¨kerasmodelçš„ä¸‰ä¸ªæ–¹æ³•è®­ç»ƒå’Œè¯„ä¼°</span></span><br><span class="line">    model.compile(optimizer=tf.keras.optimizers.Adam(learning_rate=<span class="number">0.001</span>)</span><br><span class="line">        ,loss=tf.keras.losses.sparse_categorical_crossentropy</span><br><span class="line">        ,metrics=[tf.keras.metrics.sparse_categorical_accuracy])</span><br><span class="line">    <span class="comment">#complleæ¥å— ä¼˜åŒ–å™¨ï¼ŒæŸå¤±å‡½æ•°ï¼Œè¯„ä¼°æŒ‡æ ‡éƒ½ä»å¯¹åº”çš„ç±»é‡Œé€‰</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    model.fit(MNISTLoader().train_data,MNISTLoader().train_label,epochs=<span class="number">3</span>,batch_size=<span class="number">100</span>)</span><br><span class="line">    <span class="comment">#è¿”å›åˆ—è¡¨åŒ…å«æœ€ç»ˆlosså’Œaccuracy åœ¨è¿™é‡Œæµ‹è¯•ä¹‹å‰çš„æ¨¡å‹å‡†ç¡®ç‡éƒ½ä¸Šå‡äº†</span></span><br><span class="line">    print(<span class="string">'\n'</span>,model.evaluate(MNISTLoader().test_data,MNISTLoader().test_label))</span><br><span class="line">apitrain()</span><br></pre></td></tr></table></figure>]]></content>
      <categories>
        <category>Tensorflow</category>
      </categories>
      <tags>
        <tag>Tensorflow</tag>
        <tag>ç¬”è®°</tag>
      </tags>
  </entry>
</search>
